<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>SB Admin 2 - Bootstrap Admin Theme</title>

    <!-- Bootstrap Core CSS -->
    <link href="../vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- MetisMenu CSS -->
    <link href="../vendor/metisMenu/metisMenu.min.css" rel="stylesheet">

    <!-- DataTables CSS -->
    <link href="../vendor/datatables-plugins/dataTables.bootstrap.css" rel="stylesheet">

    <!-- DataTables Responsive CSS -->
    <link href="../vendor/datatables-responsive/dataTables.responsive.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="../dist/css/sb-admin-2.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="../vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- JQuery DataTables CSS -->
    <link href="../vendor/datatables/css/jquery.dataTables.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>

    <div id="wrapper">

        <!-- Navigation -->
        <nav class="navbar navbar-default navbar-static-top" role="navigation" style="margin-bottom: 0">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="index.html">Genso Solar</a>
            </div>
            <!-- /.navbar-header -->

            <ul class="nav navbar-top-links navbar-right">
                <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                        <i class="fa fa-bell fa-fw" style="color: white"></i> <i class="fa fa-caret-down" style="color: white"></i>
                    </a>
                    <ul class="dropdown-menu dropdown-alerts">
                        <li>
                            <a href="#">
                                <div>
                                    <i class="fa fa-envelope fa-fw"></i> Message Sent
                                    <span class="pull-right text-muted small">4 minutes ago</span>
                                </div>
                            </a>
                            </li>
                            <li class="divider"></li>
                            <li>
                                <a href="#">
                                    <div>
                                        <i class="fa fa-twitter fa-fw"></i> 3 New Followers
                                        <span class="pull-right text-muted small">12 minutes ago</span>
                                    </div>
                                </a>
                            </li>
                            <li class="divider"></li>
                            <li>
                                <a href="#">
                                    <div>
                                        <i class="fa fa-envelope fa-fw"></i> Message Sent
                                        <span class="pull-right text-muted small">4 minutes ago</span>
                                    </div>
                                </a>
                            </li>
                            <li class="divider"></li>
                            <li>
                                <a href="#">
                                    <div>
                                        <i class="fa fa-tasks fa-fw"></i> New Task
                                        <span class="pull-right text-muted small">4 minutes ago</span>
                                    </div>
                                </a>
                            </li>
                            <li class="divider"></li>
                            <li>
                                <a href="#">
                                    <div>
                                        <i class="fa fa-upload fa-fw"></i> Server Rebooted
                                        <span class="pull-right text-muted small">4 minutes ago</span>
                                    </div>
                                </a>
                            </li>
                            <li class="divider"></li>
                            <li>
                                <a class="text-center" href="#">
                                    <strong>See All Alerts</strong>
                                    <i class="fa fa-angle-right"></i>
                                </a>
                            </li>
                        </ul>
                        <!-- /.dropdown-alerts -->
                    </li>
                <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                        <i class="fa fa-user fa-fw" style="color: white"></i> <i class="fa fa-caret-down" style="color: white"></i>
                    </a>
                    <ul class="dropdown-menu dropdown-user">
                        <li><a href="#"><i class="fa fa-user fa-fw"></i> User Profile</a>
                        </li>
                        <li><a href="#"><i class="fa fa-gear fa-fw"></i> Settings</a>
                        </li>
                        <li class="divider"></li>
                        <li><a href="login.html"><i class="fa fa-sign-out fa-fw"></i> Logout</a>
                        </li>
                    </ul>
                    <!-- /.dropdown-user -->
                </li>
                <!-- /.dropdown -->
            </ul>
            <!-- /.navbar-top-links -->

            <div class="navbar-default sidebar" role="navigation">
                <div class="sidebar-nav navbar-collapse">
                    <ul class="nav" id="side-menu">
                        <li class="sidebar-search">
                            <a href="users.html" style="text-align: center"><i class="fa fa-user fa-fw" style="font-size: 150px"></i>User Name</a>
                        </li>
                        <li>
                            <a href="index.html"><i class="fa fa-dashboard fa-fw" style="font-size: 25px"></i> Dashboard</a>
                        </li>
                        <li>
                            <a href="supliers.html"><i class="fa fa-table fa-fw" style="font-size: 25px"></i> Supliers</a>
                        </li>
                        <li>
                            <a href="stores.html"><i class="fa fa-edit fa-fw" style="font-size: 25px"></i> Stores</a>
                        </li>
                        <li>
                            <a href="por.html"><i class="fa fa-bar-chart-o fa-fw" style="font-size: 25px"></i> Purchase order records</a>
                        </li>
                        <li>
                            <a href="jobs.html"><i class="fa fa-gear fa-fw" style="font-size: 25px"></i> Jobs</a>
                        </li>
                        <li>
                            <a href="users.html"><i class="fa fa-users fa-fw" style="font-size: 25px"></i> Users</a>
                        </li>
                    </ul>
                </div>
                <!-- /.sidebar-collapse -->
            </div>
            <!-- /.navbar-static-side -->
        </nav>

        <!-- Page Content -->
        <div id="page-wrapper">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-lg-12">
                        <h1 class="page-header">Job</h1>
                    </div>
                    <!-- /.col-lg-12 -->
                </div>
                <!-- /.row -->
                <div class="row">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <strong>Job Card</strong>
                        </div>
                        <div class="panel-body">
                            <form>
                                <div class="row">
                                    <div class="col-lg-5">
                                        <!-- <h1>Genso Solar</h1> -->
                                    </div>
                                    <div class="col-lg-7">
                                        <div class="row">
                                            <div class="col-lg-6">
                                                <!-- blank space -->
                                            </div>
                                            <div class="col-lg-6">
                                                <div class="row">
                                                    <div class="col-lg-3">
                                                        <strong>Date:</strong>
                                                    </div>
                                                    <div class="col-lg-9">
                                                        <input id="date" type="date" class="form-control">
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <br>
                                                </div>
                                                <div class="row">
                                                    <div class="col-lg-3">
                                                        <strong>Job No:</strong>
                                                    </div>
                                                    <div class="col-lg-9">
                                                        <input id="job_no" type="text" class="form-control">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <br>
                                        <div class="row">
                                            <!-- <div class="col-lg-12">                  -->
                                                <div class="col-lg-4">
                                                    <p>&nbsp;&nbsp;&nbsp;&nbsp;Marketing Person:</p>
                                                </div>
                                                <div class="col-lg-8">
                                                    <input id="marketing_person" type="text" class="form-control">
                                                </div>
                                            <!-- </div> -->
                                            <!-- <div class="col-lg-4">
                                                <div class="row">
                                                    <div class="col-lg-4">
                                                        <p>Code:</p>
                                                    </div>
                                                    <div class="col-lg-8">
                                                        <input id="code" type="text" class="form-control">
                                                    </div>
                                                </div>
                                            </div> -->
                                        </div>
                                        <br>
                                        <div class="row">
                                            <div class="col-lg-4">
                                                <p>&nbsp;&nbsp;&nbsp;&nbsp;Agrement signed date:</p>
                                            </div>
                                            <div class="col-lg-8">
                                                <input id="agrement_signed_date" type="date" class="form-control">
                                            </div>
                                        </div>
                                        <br>
                                        <!-- <div class="row">
                                            <div class="col-lg-8">                 
                                                <div class="col-lg-6">
                                                    <p>Initial payment received:</p>
                                                </div>
                                                <div class="col-lg-6">
                                                    <select name="initial_payment" id="initial_payment_recv" class="form-control">
                                                        <option value="null"></option>
                                                        <option value="yes">Yes</option>
                                                        <option value="no">No</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-lg-4">
                                                <div class="row">
                                                    <div class="col-lg-4">
                                                        <p>%:</p>
                                                    </div>
                                                    <div class="col-lg-8">
                                                        <input id="presentage" type="number" class="form-control">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <br> -->
                                        <div class="row">
                                            <div class="col-lg-4">
                                                <p>&nbsp;&nbsp;&nbsp;&nbsp;Expected installation date:</p>
                                            </div>
                                            <div class="col-lg-8">
                                                <input id="expected_installation_date" type="date" class="form-control">
                                            </div>
                                        </div>
                                        <br>
                                        <!-- <div class="row">
                                            <div class="col-lg-2">
                                                <div class="col-lg-6">
                                                    <p>NIC</p>
                                                </div>
                                                <div class="col-lg-6">
                                                    <input id="nic" type="checkbox">
                                                </div>                              
                                            </div>
                                            <div class="col-lg-3">
                                                <div class="col-lg-8">
                                                    <p>Electricity Bill</p>
                                                </div>
                                                <div class="col-lg-4">
                                                    <input id="electricity_bill" type="checkbox">
                                                </div>
                                            </div>
                                            <div class="col-lg-3">
                                                <div class="col-lg-8">
                                                    <p>Passbook</p>
                                                </div>
                                                <div class="col-lg-4">
                                                    <input id="passbook" type="checkbox">
                                                </div>
                                            </div>
                                            <div class="col-lg-4">
                                                <div class="col-lg-8">
                                                    <p>Net metering application</p>
                                                </div>
                                                <div class="col-lg-4">
                                                    <input id="net_metering_application" type="checkbox">
                                                </div>
                                            </div>
                                        </div> -->
                                    </div>
                                </div>
                                <!-- Start second section -->
                                <hr>
                                
                                <div class="row">
                                    <!-- Customer details -->
                                <div class="col-lg-4">
                                        <div class="panel panel-default">
                                            <div class="panel-heading">
                                                <strong>Customer details</strong>
                                            </div>
                                            <div class="panel-body">
                                                <p>Name:</p>
                                                <input id="name" type="text" class="form-control">
                                                <br>
                                                <p>Address:</p>
                                                <input id="address" type="text" class="form-control">
                                                <br>
                                                <p>Site Address:</p>
                                                <input id="site_address" type="text" class="form-control">
                                                <br>
                                                <p>Contact No:</p>
                                                <input id="contct_no" type="number" class="form-control">
                                                <br>
                                                <p>email:</p>
                                                <input id="email" type="email" class="form-control">
                                                <br>
                                                <!-- <p>Connection type:</p>
                                                <select id="connection_type" class="form-control">
                                                    <option value="domestic">Domestic</option>
                                                    <option value="commercial">Commercial</option>
                                                    <option value="industrial">Industrial</option>
                                                    <option value="government">Government</option>
                                                    <option value="other">Other</option>
                                                </select>
                                                <br> -->
                                                <p>Provider:</p>
                                                <select id="provider" class="form-control">
                                                    <option value="CEB">CEB</option>
                                                    <option value="LECO">LECO</option>
                                                </select>
                                                <br>
                                                <p>Bill area:</p>
                                                <input id="bill_area" type="text" class="form-control">
                                                <br>
                                                <p>Connection type:</p>
                                                <select id="connection_type" class="form-control">
                                                    <option value="sp">Single Phase -SP</option>
                                                    <option value="tp30a">Three Phase -TP 30A</option>
                                                    <option value="tp60a">Three Phase -TP 60A</option>
                                                    <option value="transformers">Transformers/Bulk</option>
                                                </select>
                                                <br>
                                                <!-- <p>If transformers/bulk</p>
                                                <div class="row">
                                                    <div class="col-lg-10">
                                                        <input id="bulk" class="form-control">
                                                    </div>
                                                    <div class="col-lg-2">
                                                        <p>kVA</p>
                                                    </div>
                                                </div>
                                                <br> -->
                                                <p>Name change:</p>
                                                <select id="name_change" class="form-control">
                                                    <option value="false">Yes</option>
                                                    <option value="true">No</option>
                                                </select>
                                                <br>
                                                <p>Connection change:</p>
                                                <select id="connection_change" class="form-control">
                                                    <option value="false">Yes</option>
                                                    <option value="true">No</option>
                                                </select>
                                                <br>
                                                <p>Meter shifting:</p>
                                                <input id="meter_shifting" type="text" class="form-control">
                                            </div>
                                        </div>
                                    </div>
    
                                    <!-- System details -->
                                    <div class="col-lg-5">
                                        <div class="panel panel-default">
                                            <div class="panel-heading">
                                                <strong>System details</strong>
                                            </div>
                                            <div class="panel-body">
                                                <button type="button" class="btn btn-default" onclick="onClickAddItm()">Add</button>
                                                <button type="button" class="btn btn-default" onclick="onClickDelItm()">Delete</button>
                                        
                                                <p>&nbsp;</p>
    
                                                <table class="table table-striped table-bordered table-hover" id="system_table" >
                                                    <thead>
                                                        <tr>
                                                            <td><strong>Item</strong></td>
                                                            <td><strong>Qty</strong></td>
                                                            <td><strong>Stock</strong></td>
                                                            <!-- <td><strong>Capacity</strong></td> -->
                                                            <td><strong>Brand</strong></td>
                                                            <td><strong>Wattage</strong></td>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
    
                                                    </tbody>
                                                </table>
                                                <hr>    
                                                
                                                <p>Grid solution:</p>
                                                <select id="grid_solution" class="form-control">
                                                    <option value="NA">NA</option>
                                                    <option value="NM">NM</option>
                                                    <option value="NP">NP</option>
                                                </select>
                                                <hr>
                                                <p>Future expand:</p>
                                                <select id="Future_expand" class="form-control">
                                                    <option value=false>Yes</option>
                                                    <option value=true>No</option>
                                                </select>
                                                <!-- <br>
                                                <p>If yes:</p>
                                                <input id="Future_expand_yes" type="text" class="form-control"> -->
                                                <hr>
                                                <p>Generator availability:</p>
                                                <select id="generator_availability" class="form-control">
                                                    <option value="true">No</option>
                                                    <option value="false">Yes</option>
                                                </select>
                                                <!-- <br> -->
                                                <!-- <p>Capacity:</p>
                                                <input id="generator_capacity" type="text" class="form-control"> -->
                                            </div>
                                        </div>
                                    </div>
    
                                    <!-- Roof details -->
                                    <div class="col-lg-3">
                                        <div class="panel panel-default">
                                            <div class="panel-heading">
                                                <strong>Roof details</strong>
                                            </div>
                                            <div class="panel-body">
                                                <!-- roof selection -->
                                                <p>Type:</p>
                                                <select id="roof_type" class="form-control">
                                                    <option value="sheet">sheet</option>
                                                    <option value="amano">amano</option>
                                                    <option value="tile">tile</option>
                                                    <option value="slab">slab</option>
                                                </select>
                                                <br>
    
                                                <p>Structure by:</p>
                                                <select id="structure_by" class="form-control">
                                                    <option value="genso">genso</option>
                                                    <option value="customer">customer</option>
                                                </select>
                                                <br>
                                                
                                                <p>Water proof:</p>
                                                <select id="water_proof" class="form-control">
                                                    <option value="false">Yes</option>
                                                    <option value="true">No</option>
                                                </select>
                                                <hr>
                                                <p>Height:</p>
                                                <input id="height" type="text" class="form-control">
                                                <br>
                                                <p>Width:</p>
                                                <input id="width" type="text" class="form-control">
                                                <br>
                                                <p>Length:</p>
                                                <input id="length" type="text" class="form-control">
                                                <br>
                                                <p>Angle:</p>
                                                <input id="angel" type="text" class="form-control">
                                                <br>
                                                <p>Direction:</p>
                                                <input id="direction" type="text" class="form-control">
                                                <br>
                                                <p>Possiable shade:</p>
                                                <input id="possiable_shade" type="text" class="form-control">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- operation planning -->
                                <hr>
                                <div class="panel panel-default">
                                    <div class="panel-heading">
                                        <strong><p style="text-align: center;">Operations planning</p></strong>
                                    </div>
                                    <div class="panel-body">
                                        <button type="button" class="btn btn-default btn-default" onclick="onClickAddOpr()">Add</button>
                                        <button type="button" class="btn btn-default btn-default" onclick="onClickDelOpr()">Delete</button>
                                        
                                        <p>&nbsp;</p>

                                        <table class="table table-striped table-bordered table-hover" id="operations_table" >
                                            <thead>
                                                <tr>
                                                    <td><strong>Operation</strong></td>
                                                    <td><strong>Date</strong></td>
                                                </tr>
                                            </thead>
                                            <tbody>
    
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                                <!-- Finance -->
                                <hr>
                                <div class="panel panel-default">
                                    <div class="panel-heading">
                                        <strong><p style="text-align: center;">Finance</p></strong>
                                    </div>
                                    <div class="panel-body">
                                        <!-- <label>Payments:</label>
                                        <p></p> -->
                                        <button type="button" class="btn btn-default btn-default" onclick="onClickAddFinance()">Add</button>
                                        <button type="button" class="btn btn-default btn-default" onclick="onClickDelFinance()">Delete</button>
                                        
                                        <p>&nbsp;</p>

                                        <table class="table table-striped table-bordered table-hover" id="finance_table" >
                                            <thead>
                                                <tr>
                                                    <td><strong>Accecpted by</strong></td>
                                                    <td><strong>Amount</strong></td>
                                                    <td><strong>Date</strong></td>
                                                    <td><strong>Remarks</strong></td>
                                                </tr>
                                            </thead>
                                            <tbody>
    
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                                <!-- end of section buttons -->
                                <hr>
                                <div class="row">
                                    <div class="col-lg-3">
                                        <button type="button" class="btn btn-block btn-default" onclick="onClickSaveBtn()" id="save_btn">Save</button>        
                                    </div>
                                    <div class="col-lg-6"></div>
                                    <div class="col-lg-3">
                                        <button type="button" class="btn btn-block btn-default" onclick="onClickCloseBtn()">Close</button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <!-- /.container-fluid -->

            <!-- system details table  -->
            <div class="modal" id="system_details_modal">
                <div class="col-lg-4"></div>
                <div class="col-lg-4">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <strong>Add new item</strong>
                        </div>
                        <div class="panel-body">
                            <form role="form">
                                <label>Item</label>
                                <!-- <input id="system_details_item" class="form-control" type="text"> -->
                                <select id="system_details_item" class="form-control"></select>
                                <br>
                                <label>Quantity</label>
                                <input id="system_details_qty" class="form-control" type="number">
                                <br>
                                <div class="row">
                                    <div class="col-lg-4">
                                        <button type="button" class="form-control" onclick="onClickAddItem()">Add</button>
                                    </div>
                                    <div class="col-lg-4"></div>
                                    <div class="col-lg-4">
                                        <button type="button" class="form-control" onclick="onClickCloseItem()">Close</button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <!-- /# system details table -->

            <!-- Yes No answer box -->

            <div class="modal" id="yes_no_modal">
                <div class="col-lg-4"></div>
                <div class="col-lg-4">
                    <div class="panel panel-default">
                        <div class="panel-body">
                            <strong id="question">You have allocated more than the amount available in the inventory. Do you want to create a new purchase record?</strong>
                            <div class="row">
                                <div class="col-lg-4">
                                    <button type="button" class="btn btn-default btn-block" onclick="onClickYes()">Yes</button>
                                </div>
                                <div class="col-lg-4"></div>
                                <div class="col-lg-4">
                                    <button type="button" class="btn btn-default btn-block" onclick="onClickNo()">No</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>  
            </div>

            <!-- /#Yes No answer box -->

            <!-- por created overlay -->

            <div class="modal" id="create_modal">
                    <div class="col-lg-4"></div>
                    <div class="col-lg-4">
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <strong id="por_created_heading">Add new purchase order record</strong>
                            </div>
                            <div class="panel-body">
                                <form role="form">
                                    <div class="form-group">
                                        <div class="row">
                                            <div class="col-lg-4">
                                                <label>Name:</label>
                                            </div>
                                            <div class="col-lg-8">
                                                <input type="text" value="" class="from-control" id="por_created_name">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <div class="row">
                                            <div class="col-lg-4">
                                                <label>Quantity:</label>
                                            </div>
                                            <div class="col-lg-8">
                                                <input type="number" value="" class="from-control" id="por_created_qty">
                                            </div>
                                        </div>                                    
                                    </div>
                                    <div class="form-group">
                                        <div class="row">
                                            <div class="col-lg-4">
                                                <label>Unit price:</label>
                                            </div>
                                            <div class="col-lg-8">
                                                <input type="number" value="" class="from-control" id="por_created_unitp">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <div class="row">
                                            <div class="col-lg-4">
                                                <label>Total Price:</label>
                                            </div>
                                            <div class="col-lg-8">
                                                <input type="number" value="" class="from-control" id="por_created_total" disabled>
                                            </div> 
                                        </div>                                   
                                    </div>
                                    <div class="form-group">
                                        <div class="row">
                                            <div class="col-lg-4">
                                                <label>Created Date:</label>
                                            </div>
                                            <div class="col-lg-8">
                                                <input type="date" value="" class="from-control" id="por_created_date">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <div class="col-lg-3">
                                            <button type="button" class="btn btn-default btn-block" id="por_created_create_btn" onclick="onClickCreate()">Create</button>
                                        </div>
                                        <div class="col-lg-6"></div>
                                        <div class="col-lg-3">
                                            <button type="button" class="btn btn-default btn-block" id="por_created_close_btn" onclick="onClickClose()">Close</button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
    
                <!-- /#por created overlay -->

                <!-- add operation overlay -->
                <div class="modal" id="operation_modal">
                        <div class="col-lg-4"></div>
                        <div class="col-lg-4">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <strong>Add Operation</strong>
                                </div>
                                <div class="panel-body">
                                    <form role="form">
                                        <label>Operation</label>
                                        <input id="operation_operation" class="form-control" type="text">
                                        <br>
                                        <label>Date</label>
                                        <input id="operation_date" class="form-control" type="date">
                                        <br>
                                        <div class="row">
                                            <div class="col-lg-4">
                                                <button type="button" class="form-control" onclick="addOperation()">Add</button>
                                            </div>
                                            <div class="col-lg-4"></div>
                                            <div class="col-lg-4">
                                                <button type="button" class="form-control" onclick="closeOperation()">Close</button>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                <!-- /# add operation overlay -->
        </div>
        <!-- /#page-wrapper -->

    </div>
    <!-- /#wrapper -->

    <!-- jQuery -->
    <script src="../vendor/jquery/jquery.min.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="../vendor/bootstrap/js/bootstrap.min.js"></script>

    <!-- Metis Menu Plugin JavaScript -->
    <script src="../vendor/metisMenu/metisMenu.min.js"></script>

    <!-- DataTables JavaScript -->
    <script src="../vendor/datatables/js/jquery.dataTables.min.js"></script>
    <script src="../vendor/datatables-plugins/dataTables.bootstrap.min.js"></script>
    <script src="../vendor/datatables-responsive/dataTables.responsive.js"></script>

    <!-- Custom Theme JavaScript -->
    <script src="../dist/js/sb-admin-2.js"></script>

    <script>

        // function for get url parameter
        function getUrlParameter(name) {
            name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
            var regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
            var results = regex.exec(location.search);
            return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
        };

        // data for system table selected row data
        var system_table_row_data = null;
        var system_table_data = [];
        var site_inventories = null;

        var system_table;
        var operations_table;
        var finance_table;
        var selected_system_row = null;
        var selected_operations_row = null;
        var selected_finance_row = null;

        $(document).ready(function() {

            // test section
            
            // document.getElementById("roof_type").value = "amano";

            // end test section

            $.ajax({
                url: 'http://18.218.167.32:8080/genso_backend/genso/invmgtservice/getJobs',
                type: 'GET',
                beforeSend: function(xhr) {
                    xhr.setRequestHeader('Authorization', 'Basic YWRtaW46YWRtaW4=')
                },
                success: function(response) {
                    for(var i = 0; i < response.length; i++) {
                        if(response[i].id == getUrlParameter('id')) {
                            // if we got the correct job id fill the from
                            document.getElementById("date").value = response[i].createdDate;
                            document.getElementById("marketing_person").value = response[i].marketingPerson;
                            document.getElementById("agrement_signed_date").value = response[i].agreementSignedDate;
                            document.getElementById("expected_installation_date").value = response[i].expectedInstallationDate;
                            document.getElementById("name").value = response[i].name;
                            document.getElementById("address").value = response[i].siteAddress;
                            document.getElementById("site_address").value = response[i].siteAddress;
                            document.getElementById("contct_no").value = response[i].phone;
                            document.getElementById("email").value = response[i].email;
                            document.getElementById("provider").value = response[i].billInfo.type;
                            document.getElementById("bill_area").value = response[i].billInfo.billArea;
                            document.getElementById("meter_shifting").value = response[i].billInfo.meterShifting;
                            document.getElementById("provider").value = response[i].billInfo.type;

                            document.getElementById("grid_solution").value = response[i].siteSystem.gridSol;
                            document.getElementById("Future_expand").value = response[i].siteSystem.futureExpansion;
                            document.getElementById("generator_availability").value = response[i].siteSystem.generatorAvailable;

                            document.getElementById("height").value = response[i].roof.height;
                            document.getElementById("width").value = response[i].roof.width;
                            document.getElementById("length").value = response[i].roof.length;
                            document.getElementById("angel").value = response[i].roof.angle;
                            document.getElementById("direction").value = response[i].roof.direction;
                            document.getElementById("possiable_shade").value = response[i].roof.shade;

                            console.log(system_table_data);
                            console.log(response[i].siteSystem.siteInventories);

                            system_table = $('#system_table').DataTable({
                                data: response[i].siteSystem.siteInventories,
                                responsize: true,
                                stateSave: true,
                                select: true,
                                paging: false,
                                searching: false,
                                columns: [
                                    { data: "productName" },
                                    { data: "requiredQuantity" },
                                    { data: "capacity" },
                                    { data: "brand" },
                                    { data: "wattage" }
                                ]
                            });

                            $('#system_table tbody').on('click', 'tr', function() {
                                system_table_row_data = system_table.row(this).data();
                                console.log(system_table_row_data);

                                selected_system_row = this;

                                if ( $(this).hasClass('selected') ) {
                                    $(this).removeClass('selected');
                                }
                                else {
                                    system_table.$('tr.selected').removeClass('selected');
                                    $(this).addClass('selected');
                                }
                            });

                            // operations_table
                            operations_table = $('#operations_table').DataTable({
                                data: response[i].operationPlan.operations,
                                responsize: true,
                                stateSave: true,
                                select: true,
                                paging: false,
                                searching: false,
                                columns: [
                                    { data: "operation" },
                                    { data: "date" }
                                ]
                            });

                            $('#operations_table tbody').on('click', 'tr', function() {
                                selected_operations_row = this;

                                if ( $(this).hasClass('selected') ) {
                                    $(this).removeClass('selected');
                                }
                                else {
                                    operations_table.$('tr.selected').removeClass('selected');
                                    $(this).addClass('selected');
                                }
                            });

                            finance_table = $('#finance_table').DataTable({
                                data: response[i].sitePayment.payments,
                                responsize: true,
                                stateSave: true,
                                select: true,
                                paging: false,
                                searching: false,
                                columns: [
                                    { data: "acceptedBy" },
                                    { data: "amount" },
                                    { data: "date" },
                                    { data: "remarks" }
                                ]
                            });

                            $('#finance_table tbody').on('click', 'tr', function() {
                                selected_finance_row = this;

                                if ( $(this).hasClass('selected') ) {
                                    $(this).removeClass('selected');
                                }
                                else {
                                    finance_table.$('tr.selected').removeClass('selected');
                                    $(this).addClass('selected');
                                }
                            });
                        }
                    }
                },
                error: function(xhr) {

                }
            });

            // read data from the url and act accordingly
            if(getUrlParameter('task') == "view") {
                document.getElementById('job_no').value = getUrlParameter('id');
                document.getElementById('job_no').disabled = true;
            } else {
                // perform tasks which specfic to add job

            }

        });

        // handling functions on system details table
        function onClickAddItm() {
            $('#system_details_modal').modal();
            document.getElementById('system_details_item').innerHTML = "";
            document.getElementById('system_details_qty').value = "";

            // load data from backend
            $.ajax({
                url: 'http://18.218.167.32:8080/genso_backend/genso/invmgtservice/getProducts',
                type: 'GET',
                beforeSend: function(xhr) {
                    xhr.setRequestHeader('Authorization', 'Basic YWRtaW46YWRtaW4=')
                },
                success: function(response) {
                    for(var i = 0; i < response.length; i++) {
                        var option = document.createElement("option");
                        option.value = option.text = response[i]["name"];
                        document.getElementById('system_details_item').add(option);
                    }
                },
                error: function(xhr) {
                    console.log('error: ' + xhr);
                }
            });
        }

        function onClickDelItm() {
            console.log('on click delete button');
            system_table.row(selected_system_row).remove().draw();
        }

        // handling system details table overlay buttons
        var selected_inv = null;

        function onClickAddItem() {
            var has_to_pass_user = false;
            console.log('on click add item to system table clicked');
            console.log('item = ' + document.getElementById('system_details_item').value);
            console.log('qty  = ' + document.getElementById('system_details_qty').value);

            $('#system_details_modal').modal('hide');

            // get products
            $.ajax({
                url: 'http://18.218.167.32:8080/genso_backend/genso/invmgtservice/getProducts',
                type: 'GET',
                beforeSend: function(xhr) {
                    xhr.setRequestHeader('Authorization', 'Basic YWRtaW46YWRtaW4=')
                },
                success: function(response) {
                    for(var i = 0; i < response.length; i++) {
                        if(response[i].name == document.getElementById('system_details_item').value) {
                            selected_inv = response[i];

                            if(response[i].stock < document.getElementById('system_details_qty').value) {
                                has_to_pass_user = true;
                                $('#yes_no_modal').modal();
                            }
                        }
                    }

                    // if we don't need user concent we move to adding new item
                    // if(!has_to_pass_user) {
                        // currently removed condition that we just pop up create new por but either it added or not is not checked
                        system_table.row.add({
                            "productName": selected_inv.name,
                            "requiredQuantity": document.getElementById("system_details_qty").value,
                            "capacity": selected_inv.stock,
                            "brand": selected_inv.brand,
                            "wattage": selected_inv.wattage
                        }).draw();
                    // }
                },
                error: function(xhr) {
                    console.log('error: ' + xhr);
                }
            });
        }

        function onClickCloseItem() {
            $('#system_details_modal').modal('hide');
        }

        // yes no modal functions
        function onClickYes() {
            $('#create_modal').modal();
        }

        function onClickNo() {
            $('#system_details_modal').modal('hide');
            $('#create_modal').modal('hide');
        }

        // operations handling functions
        function onClickAddOpr() {
            $('#operation_modal').modal();

            document.getElementById("operation_operation").value = "";
            document.getElementById("operation_date").value = "";
        }

        function onClickDelOpr() {
            console.log('clicked on delete operations table row btn');
            operations_table.row(selected_operations_row).remove().draw();
        }

        function addOperation() {
            $('#operation_modal').modal('hide');

            operations_table.row.add({
                "operation": document.getElementById("operation_operation").value,
                "date": document.getElementById("operation_date").value
            }).draw();
        }

        function closeOperation() {
            $('#operation_modal').modal('hide');
        }

        // on main form buttons

        var site_inventories_string = "";

        function onClickSaveBtn() {
            // generate list for inventory
            var i = 0;
            system_table.rows().every(function(rowIdx, tableLoop, rowLoop) {
                console.log(this.data());
                var temp = "";

                if(i < 1) {
                    temp = "{";
                } else {
                    temp = ",{";
                }

                i+=1;

                temp += "\"brand\":\"" + this.data().brand + "\",";
                temp += "\"requiredQuantity\":\"" + this.data().requiredQuantity + "\",";
                temp += "\"capacity\":" + this.data().capacity + "\",";
                temp += "\"brand\":" + this.data().brand + "\",";
                temp += "\"wattage\":" + this.data().wattage + "\"";

                temp += "}";

                site_inventories_string += temp;
            });

            console.log(site_inventories_string);
        }

        function onClickCloseBtn() {
            location.replace('jobs.html');
        }

    </script>

</body>

</html>
